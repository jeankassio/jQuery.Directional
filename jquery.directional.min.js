!function(t){t.fn.Directional=function(e){let n=t.extend({rewriteindexes:!1,selectlement:!1,clickonenter:!1},e);function o(){let t=document.activeElement;return h(t)}function i(t){return h(t[0])}function f(e){$active=o(),$tbIndex=t("[tabindex]").filter(function(){let n=i(t(this)),o=t(this).attr("tabindex")>=0,f=e?n.top<$active.top:$active.bottom-n.top<0,l=t(document.activeElement).attr("tabindex")!==t(this).attr("tabindex");return n.left-$active.left<$active.width&&($active.right,n.right,$active.width),t(this).hasClass("d-flex")&&(console.log($active.top),console.log(n.top),console.log(t(this).html())),o&&f&&l});let n,f=0;t.each($tbIndex,function(e,o){console.log(o);let l=i(t(o)),a=r($active.left,$active.top,l.left,l.top+l.height);console.log(a),console.log(l),void 0!==n?a<f&&(n=t(o),f=a):(n=t(o),f=a)}),void 0!==n&&n.length>0&&(console.log(n),n.focus(),window.scrollTo({top:n.offset().top+n.height()/2-t(window).height()/2,behavior:"smooth"}))}function l(e){$active=o(),$tbIndex=t("[tabindex]").filter(function(){let n=i(t(this)),o=t(this).attr("tabindex")>=0,f=e?n.left<$active.left:$active.left-n.right<0,l=t(document.activeElement).attr("tabindex")!==t(this).attr("tabindex"),r=n.top-$active.top<$active.height&&$active.bottom-n.bottom<$active.height;return o&&f&&r&&l});let n,f=0;t.each($tbIndex,function(e,o){console.log(o);let l=i(t(o)),a=r($active.left,$active.top,l.left,l.top);void 0!==n?a<f&&(n=t(o),f=a):(n=t(o),f=a)}),void 0!==n&&n.length>0&&(console.log(n),n.focus(),window.scrollTo({top:n.offset().top+n.height()/2-t(window).height()/2,behavior:"smooth"}))}function r(t,e,n,o){return Math.hypot(n-t,o-e)}function a(t){return t.offsetParent?t.offsetTop+a(t.offsetParent):t.offsetTop||0}function c(t){return t.offsetParent?t.offsetLeft+c(t.offsetParent):t.offsetleft||0}function h(t){return t.getBoundingClientRect()}return n.rewriteindexes&&($tbIndex=t("[tabindex]").filter(function(){return t(this).attr("tabindex")>=0}),$i=0,t.each($tbIndex,function(e,n){if(0==t(`[tabindex="${$i}"]`).length)t(n).attr("tabindex",$i);else{for(;t(`[tabindex="${$i}"]`).length>0;)$i++;t(n).attr("tabindex",$i)}$i++})),n.selectelement&&(n.selectelement instanceof jQuery?n.selectelement.focus():t(n.selectelement).focus()),t(document).on("keyup",function(e){switch(e.which){case 37:e.preventDefault(),l(!0);break;case 38:e.preventDefault(),f(!0);break;case 39:e.preventDefault(),l(!1);break;case 40:e.preventDefault(),f(!1);break;case 13:n.clickonenter&&t(document.activeElement).click()}}),this},t(document).ready(function(){})}(jQuery);
